---
title: "R Notebook"
output: html_notebook
---

```{r Install required library to import trading data QUANTMOD package}
library(quantmod)

```

```{r Download required indices}
startDate<-"2017-08-01" 
endDate<-"2018-07-31"
getSymbols(c("^NSEI","^GSPC","^IXIC","^N225","^HSI","^FTSE","INR=X","GBPINR=X","JPYINR=X","GOLD","F*CL.NYM"),from=startDate,to=endDate)

```

```{r Merge all datasets}
x1<-merge(NSEI,GSPC,join="inner")
x2<-merge(x1,IXIC,join="inner")
x3<-merge(x2,N225,join="inner")
x4<-merge(x3,HSI,join="inner")
x5<-merge(x4,FTSE,join="inner")
x6<-merge(x5,`INR=X`,join="left")
x7<-merge(x6,`GBPINR=X`,join="left")
x8<-merge(x7,`JPYINR=X`,join="left")
x9<-merge(x8,GOLD,join="left")
x10<-merge(x9,`F*CL.NYM`,join="left")

head(x10)
summary(x10)
dim(x10)

```

```{r Check for NAs in data and handle th same. Either approximate, Remove NAs (Use zoo function na.locf (Last observation carried forward method))}
dim(x10[!complete.cases(x10),]) 
x7<-na.locf(x6)
dim(x7[!complete.cases(x7),]) 
head(x7)

```

```{r Derive log returens Close to previous close}
x7$NSEI.LogReturn <- diff(log(x7$NSEI.Close), lag = 1)
x7$NSEI.LogReturn[1]<-0
```

```{r Derive log returns for High to Low}
x7$NSEI.LogHLReturn<-log(x7$NSEI.High)-log(x7$NSEI.Low)
```

```{r Convert xts object to data frame}
MasterData<-data.frame(date=index(x11), coredata(x11))
MasterData

write.csv(MasterData, file = "MasterData.csv")

```














